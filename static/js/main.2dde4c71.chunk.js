(this.webpackJsonpgantt=this.webpackJsonpgantt||[]).push([[0],{34:function(t,e,a){t.exports=a(53)},45:function(t,e,a){},46:function(t,e,a){},53:function(t,e,a){"use strict";a.r(e);var r=a(28),n=a(0),o=a.n(n),d=a(11),s=a(9),i=a(29),c=a(13),l=a(8),m=a(18),u=a(12),w=a(4),f=a.n(w),p="app/CHANGE_TERM",g=function(t){return Object(m.a)({ganttState:{startAt:new Date("2020-07-01"),endAt:new Date("2020-07-31")},works:v},t)},v=[{workId:u.Guid.create().toString(),workName:"\u5de5\u7a0b\uff11",userName:"\u62c5\u5f53\u8005\uff11",terms:[{startAt:new Date("2020-07-01"),endAt:new Date("2020-07-05")}]},{workId:u.Guid.create().toString(),workName:"\u5de5\u7a0b\uff12",userName:"\u62c5\u5f53\u8005\uff12",terms:[{startAt:new Date("2020-07-06"),endAt:new Date("2020-07-10")}]},{workId:u.Guid.create().toString(),workName:"\u5de5\u7a0b\uff13",userName:"\u62c5\u5f53\u8005\uff13",terms:[{startAt:new Date("2020-07-11"),endAt:new Date("2020-07-15")}]},{workId:u.Guid.create().toString(),workName:"\u5de5\u7a0b\uff14",userName:"\u62c5\u5f53\u8005\uff14",terms:[{startAt:new Date("2020-07-16"),endAt:new Date("2020-07-20")}]},{workId:u.Guid.create().toString(),workName:"\u5de5\u7a0b\uff15",userName:"\u62c5\u5f53\u8005\uff15",terms:[{startAt:new Date("2020-07-21"),endAt:new Date("2020-07-25")}]}],y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g(),e=arguments.length>1?arguments[1]:void 0;if(e.type!==p)return t;var a=f()(t.ganttState.startAt),r=e.workId,n=e.positionStart,o=e.width,d=n+o,s=Math.floor(n/25),i=Math.floor(d/25)-1,c=a.clone().add(s,"d"),l=a.clone().add(i,"d"),u=t.works.find((function(t){return t.workId===r}));u.terms[0].startAt=c.toDate(),u.terms[0].endAt=l.toDate(),console.log({positionStart:n,startAt:f()(u.terms[0].startAt).format("yyyy/MM/DD"),endAt:f()(u.terms[0].endAt).format("yyyy/MM/DD")});var w=t.works.map((function(t){return t.workId===r?u:t}));return Object(m.a)(Object(m.a)({},t),{},{works:w})},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g(),e=arguments.length>1?arguments[1]:void 0;switch(e.type){case p:return y(t,e);default:return t}},k=Object(l.a)(),E=Object(s.c)({router:Object(c.b)(k),app:b}),h=(a(45),a(10)),A=a(17),N=(a(46),a(31)),D=function(t){for(var e=[],a=f()(t.startAt),r=f()(t.endAt),n=a;n<=r;n=n.add(1,"d"))e.push(o.a.createElement("div",{key:n.format("yyMMDD"),className:"table-header-column"},o.a.createElement("div",null,n.format("D")),o.a.createElement("div",null,n.format("dd"))));return e},S=function(t,e){return t*(f()(e.endAt).diff(e.startAt,"d")+1)},O=function(t,e,a){return t*f()(e).diff(a,"d")},I=function(t,e,a){return t*(f()(a).diff(e,"d")+1)},M=Object(h.c)((function(t){return{ganttState:t.app.ganttState,works:t.app.works}}),(function(t){return{changeTerm:function(e,a,r){return t(function(t,e,a){return{type:p,workId:t,positionStart:e,width:a}}(e,a,r))}}}))((function(t){var e=t.ganttState,a=void 0===e?void 0:e,r=t.works,n=void 0===r?[]:r,d=t.changeTerm,s=void 0===d?function(){}:d;if(void 0===a)return o.a.createElement(o.a.Fragment,null);var i=S(25,a),c={width:i},l={width:350+i},m=function(t,e,a,r,n){var o=a.getAttribute("data-work-id"),d=parseInt(n.x,10),i=parseInt(a.style.width,10);s(o,d,i)},u=function(t,e){var a=e.node,r=a.getAttribute("data-work-id");if(null==r)throw console.log("----- onDrag \u3067\u30a8\u30e9\u30fc -----"),console.log(a),console.log(a.parentNode),t.target.parentNode&&console.log(a.parentNode.parentNode),new Error("onDrag \u3067\u30a8\u30e9\u30fc");var n=window.getComputedStyle(a),o=new DOMMatrix(n.webkitTransform).m41,d=parseInt(a.style.width);s(r,o,d)};return o.a.createElement("div",{className:"table",style:l},o.a.createElement("div",{className:"table-header"},o.a.createElement("div",{className:"task"},"\u30bf\u30b9\u30af"),o.a.createElement("div",{className:"start-at"},"\u958b\u59cb\u65e5"),o.a.createElement("div",{className:"end-at"},"\u7d42\u4e86\u65e5"),o.a.createElement("div",{className:"table-header-days",style:c},D(a))),o.a.createElement("div",{className:"table-body"},n.map((function(t,e){return o.a.createElement("div",{className:"table-body-inner"},o.a.createElement("div",{className:"task"},t.workName),o.a.createElement("div",{className:"table-body-row-wrapper"},o.a.createElement("div",{className:"start-at"},f()(t.terms[0].startAt).format("yyyy.MM.DD")),o.a.createElement("div",{className:"end-at"},f()(t.terms[0].endAt).format("yyyy.MM.DD")),o.a.createElement("div",{key:t.workId,className:"table-body-row",style:c},o.a.createElement(N.a,{className:"rnd","data-work-id":t.workId,default:{x:O(25,t.terms[0].startAt,a.startAt),y:10,width:I(25,t.terms[0].startAt,t.terms[0].endAt),height:25},dragAxis:"x",enableResizing:{top:!1,right:!0,bottom:!1,left:!0,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},bounds:"parent",resizeGrid:[25,0],dragGrid:[25,0],minWidth:25,onDragStop:u,onResizeStop:m}))))}))))})),j=Object(A.f)((function(){return o.a.createElement(A.d,null,o.a.createElement(A.b,{path:"/",component:M,exact:!0}),o.a.createElement(A.a,{exact:!0,from:"/*",to:{pathname:"/"}}))})),x=function(t){var e=t.store;return o.a.createElement(h.a,{store:e},o.a.createElement(c.a,{history:k},o.a.createElement(j,null)))},G=document.getElementById("root"),_=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,R=Object(s.e)((function(t,e){return E(t,e)}),_(Object(s.a)(Object(r.a)(k),i.a)));d.render(n.createElement(x,{store:R}),G)}},[[34,1,2]]]);
//# sourceMappingURL=main.2dde4c71.chunk.js.map